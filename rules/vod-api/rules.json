[
  {
    "id": "vod-api__providers__read",
    "match": {
      "url": "<https|http>://api\\.dhe\\.ovh/vod-api/providers",
      "methods": [
        "GET"
      ]
    },
    "upstream": {
      "url": "http://vod-api.railway.internal:4000",
      "preserve_host": true
    },
    "authenticators": [
      {
        "handler": "oauth2_introspection"
      }
    ],
    "authorizer": {
      "handler": "keto_engine_acp_ory",
      "config": {
        "flavor": "exact",
        "required_action": "can_read",
        "required_resource": "provider:*"
      }
    },
    "mutators": [
      {
        "handler": "id_token",
        "config": {
          "issuer_url": "https://api.dhe.ovh",
          "ttl": "15m",
          "claims": "{ \"sub\": \"{{ print .Subject }}\", \"email\": \"{{ print .Extra.email }}\", \"aud\": [\"vod-api\"] }"
        }
      }
    ]
  }
]
