[
  {
    "id": "vod-api__providers__read",
    "match": {
      "url": "<https|http>://api.dhe.ovh/vod-api/<.*>",
      "methods": [
        "GET"
      ]
    },
    "upstream": {
      "url": "http://vod-api.railway.internal:4000",
      "strip_path": "/vod-api",
      "preserve_host": true
    },
    "authenticators": [
      {
        "handler": "oauth2_introspection"
      }
    ],
    "authorizer": {
      "handler": "keto_engine_acp_ory",
      "config": {
        "flavor": "exact",
        "required_action": "can_read",
        "required_resource": "provider:*"
      }
    },
    "mutators": [
      {
        "handler": "id_token",
        "config": {
          "claims": "{ \"sub\": \"{{ print .Subject }}\", \"email\": \"{{ print .Extra.email }}\", \"aud\": [\"vod-api\"] }"
        }
      }
    ]
  }
]
